pipeline{
 agent any
  tools{
    maven 'Maven'
  }
  stages{
    stage('INITIALIZE'){
      steps{
        sh '''
                echo "PATH = ${PATH}"
                echo "M2_HOME = ${M2_HOME}"
            '''
        }
     }
    stage('BUILD') {
        steps {
              sh 'mvn clean package'
               }
           }
        stage('CHECKSTYLE') {
            steps {
                sh 'mvn checkstyle:checkstyle'
            }
        }
    stage('PMD') {
            steps {
                sh 'mvn pmd:pmd'
            }
        }
     stage('SPOTBUGS') {
            steps {
                sh 'mvn spotbugs:spotbugs'
            }
        }
     stage('FINDBUGS') {
            steps {
                sh 'mvn spotbugs:spotbugs'
            }
        }
     stage('JUNIT') {
            steps {
                sh 'mvn test'
            }
        }
     stage('Publish Results') {
            steps {
                recordIssues tools: [
                    checkStyle(pattern: '**/target/checkstyle-result.xml'),
                    spotBugs(pattern: '**/target/spotbugsXml.xml')
                ]
                junit '**/target/surefire-reports/*.xml'
            }
          } 
   }
   post {
        always {
            archiveArtifacts artifacts: '**/target/*.xml', allowEmptyArchive: true
        }
    }
}
