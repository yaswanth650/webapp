pipeline {
  agent any 
  tools {
    maven 'Maven'
  }
  stages {
    stage ('Initialize') {
      steps {
        sh '''
                    echo "PATH = ${PATH}"
                    echo "M2_HOME = ${M2_HOME}"
            ''' 
      }
    }

    stage ('Build') {
      steps {
      sh 'mvn clean package'
       }
    }

   stage('Artifact File exist'){
        steps{
            echo ' checking file in workspace'
            fileExists '/var/lib/jenkins/workspace/WEBAPP/target/WebApp.war'
            echo 'file exist'
           }
       }

   stage('Artifact file upload to S3BUCKET'){
        steps{
            echo ' Artifact uploading start-----'
            s3Upload consoleLogLevel: 'INFO', dontSetBuildResultOnFailure: false, dontWaitForConcurrentBuildCompletion: false, entries: [[bucket: 'artifacts6', excludedFile: '', flatten: false, gzipFiles: false, keepForever: false, managedArtifacts: false, noUploadOnFailure: false, selectedRegion: 'ap-south-1', showDirectlyInBrowser: false, sourceFile: '**/*.war', storageClass: 'STANDARD', uploadFromSlave: false, useServerSideEncryption: false]], pluginFailureResultConstraint: 'FAILURE', profileName: 'articats6', userMetadata: []
            echo 'Artifact uploaded'
        }
    }
   }
}
    
  
